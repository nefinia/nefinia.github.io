<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Memory Match</title>
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      color: cyan;
    }
    .grid {
      display: grid;
      gap: 10px;
      grid-template-columns: repeat(4, 100px);
      margin-top: 20px;
      margin-bottom: 20px;
    }
    .card {
      width: 100px;
      height: 100px;
      background: #333;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: white;
      cursor: pointer;
      border-radius: 8px;
      user-select: none;
      overflow: hidden;
      position: relative;
    }
    .card img {
      max-width: 80%;
      max-height: 80%;
    }
    .card.revealed {
      background: #555;
    }
    .star {
      position: absolute;
      top: 4px;
      right: 4px;
      font-size: 1.2rem;
      color: gold;
    }
    #stats {
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Memory Match</h1>
  <p>Match the pairs! 50% are image pairs, 50% are word pairs.</p>
  <div id="game" class="grid"></div>
  <div id="stats"></div>

  <script>
    const items = [
      "dog", "banana", "car", "tree",
      "house", "ball", "penguin", "computer",
      "apple", "lightbulb", "duck", "airplane",
      "pencil", "book", "cactus", "chair"
    ];

    const gameContainer = document.getElementById("game");
    const statsDiv = document.getElementById("stats");

    let firstCard = null;
    let secondCard = null;
    let lock = false;
    let matches = 0;
    let totalTries = 0;

    let wordTries = 0;
    let wordHits = 0;
    let imageTries = 0;
    let imageHits = 0;

    function startGame() {
      const totalCards = 16;
      const numPairs = totalCards / 2;
      const shuffled = shuffle(items);

      const wordPairs = shuffled.slice(0, 4).map(item => ({ value: item, format: 'word' }));
      const imagePairs = shuffled.slice(4, 8).map(item => ({ value: item, format: 'image' }));
      const pairs = [...wordPairs, ...imagePairs].flatMap(obj => [obj, { ...obj }]);

      const cardData = shuffle(pairs);

      gameContainer.innerHTML = "";
      statsDiv.innerHTML = "";

      matches = 0;
      totalTries = 0;
      wordTries = 0;
      wordHits = 0;
      imageTries = 0;
      imageHits = 0;
      firstCard = null;
      secondCard = null;
      lock = false;

      cardData.forEach((obj, index) => {
        const div = document.createElement("div");
        div.classList.add("card");
        div.dataset.value = obj.value;
        div.dataset.format = obj.format;
        div.dataset.revealed = "false";
        div.onclick = () => revealCard(div);
        gameContainer.appendChild(div);
      });
    }

    function revealCard(card) {
      if (lock || card.dataset.revealed === "true") return;

      card.classList.add("revealed");
      card.dataset.revealed = "true";

      if (card.dataset.format === "word") {
        card.textContent = card.dataset.value;
      } else {
        const img = document.createElement("img");
        img.src = `images/${card.dataset.value}.png`;
        card.innerHTML = "";
        card.appendChild(img);
      }

      if (!firstCard) {
        firstCard = card;
      } else {
        secondCard = card;
        lock = true;
        totalTries++;

        if (
          firstCard.dataset.value === secondCard.dataset.value &&
          firstCard.dataset.format === secondCard.dataset.format
        ) {
          matches++;

          if (firstCard.dataset.format === "word") {
            wordTries++;
            wordHits++;
          } else {
            imageTries++;
            imageHits++;
          }

          markMatched(firstCard);
          markMatched(secondCard);
          resetTurn();

          if (matches * 2 === 16) {
            showStats();
          }
        } else {
          if (firstCard.dataset.format === "word") wordTries++;
          else imageTries++;

          setTimeout(() => {
            hideCard(firstCard);
            hideCard(secondCard);
            resetTurn();
          }, 800);
        }
      }
    }

    function markMatched(card) {
      const star = document.createElement("div");
      star.className = "star";
      star.textContent = "‚òÖ";
      card.appendChild(star);
    }

    function hideCard(card) {
      card.classList.remove("revealed");
      card.dataset.revealed = "false";
      card.innerHTML = "";
    }

    function resetTurn() {
      firstCard = null;
      secondCard = null;
      lock = false;
    }

    function showStats() {
      const acc = (matches / totalTries * 100).toFixed(1);
      const wordAcc = wordTries ? (wordHits / wordTries * 100).toFixed(1) : "‚Äî";
      const imgAcc = imageTries ? (imageHits / imageTries * 100).toFixed(1) : "‚Äî";

      statsDiv.innerHTML = `
        <h3>üéâ Game Over!</h3>
        <p>Total Tries: ${totalTries}</p>
        <p>Total Matches: ${matches}</p>
        <p>üîç Overall Accuracy: ${acc}%</p>
        <p>üìù Words Accuracy: ${wordAcc}%</p>
        <p>üñºÔ∏è Images Accuracy: ${imgAcc}%</p>
        <button onclick="startGame()">Play Again</button>
      `;
    }

    function shuffle(arr) {
      return [...arr].sort(() => Math.random() - 0.5);
    }

    // Start immediately
    window.onload = startGame;
  </script>
</body>
</html>